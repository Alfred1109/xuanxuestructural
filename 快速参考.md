ark# 玄学预测系统 - 快速参考

## 📦 系统状态

✅ **已完成部署**
- 后端服务：运行中 (http://localhost:8002)
- 前端页面：已打开
- AI支持：已安装（需配置API密钥）
- 启动脚本：已创建

## 🚀 常用命令

### 启动系统
```bash
./start.sh
```

### 停止系统
```bash
./stop.sh
```

### 查看日志
```bash
tail -f /tmp/xuanxue-backend.log
```

### 检查服务状态
```bash
# 检查后端
curl http://localhost:8002/

# 检查AI状态
curl http://localhost:8002/api/ai/status
```

## 🎯 功能访问

| 功能 | 前端页面 | API端点 |
|------|---------|---------|
| 八字命理 | `xuanxue-web/frontend/index.html` | `POST /api/bazi` |
| 六爻占卜 | `xuanxue-web/frontend/liuyao.html` | `POST /api/divination/liuyao` |
| 奇门遁甲 | `xuanxue-web/frontend/qimen.html` | `POST /api/divination/qimen` |
| 择日学 | `xuanxue-web/frontend/zeri.html` | `GET /api/zeri/today` |

## 🤖 AI功能（可选）

### 快速启用AI

1. **获取API密钥**（详见 [AI配置指南.md](./AI配置指南.md)）
   - 访问：https://console.volcengine.com/
   - 开通豆包大模型服务
   - 创建API密钥

2. **配置环境变量**
   ```bash
   export ARK_API_KEY="your_api_key_here"
   ```

3. **重启服务**
   ```bash
   ./stop.sh
   ./start.sh
   ```

4. **验证AI状态**
   ```bash
   curl http://localhost:8002/api/ai/status
   ```

### AI增强接口

| 功能 | API端点 | 说明 |
|------|---------|------|
| AI八字分析 | `POST /api/ai/enhance-bazi` | 深度性格、事业、财运分析 |
| AI六爻解读 | `POST /api/ai/enhance-liuyao` | 详细卦象解读和建议 |
| AI奇门分析 | `POST /api/ai/enhance-qimen` | 专业预测和方位建议 |
| AI择日建议 | `GET /api/ai/enhance-zeri/{y}/{m}/{d}` | 个性化择日建议 |
| AI智能对话 | `POST /api/ai/chat` | 玄学问题解答 |

## 📚 文档索引

| 文档 | 内容 |
|------|------|
| [使用说明.md](./使用说明.md) | 完整使用指南 |
| [AI配置指南.md](./AI配置指南.md) | AI功能配置详解 |
| [README.md](./README.md) | 项目总览 |
| [xuanxue-web/START.md](./xuanxue-web/START.md) | 原始启动说明 |

## 🔧 快速测试

### 测试八字排盘
```bash
curl -X POST "http://localhost:8002/api/bazi" \
  -H "Content-Type: application/json" \
  -d '{
    "year": 1990,
    "month": 1,
    "day": 1,
    "hour": 12,
    "minute": 0,
    "gender": "男"
  }'
```

### 测试六爻占卜
```bash
curl -X POST "http://localhost:8002/api/divination/liuyao?question=今天运势如何"
```

### 测试AI对话（需配置API密钥）
```bash
curl -X POST "http://localhost:8002/api/ai/chat" \
  -H "Content-Type: application/json" \
  -d '{"question": "什么是八字命理？"}'
```

## 🛠️ 故障排查

### 后端无法启动
```bash
# 检查端口占用
lsof -i:8002

# 查看错误日志
cat /tmp/xuanxue-backend.log

# 重新安装依赖
cd xuanxue-web/backend
rm -rf venv
python3 -m venv venv
venv/bin/pip install -r requirements.txt
```

### 前端无法连接后端
1. 确认后端已启动：`curl http://localhost:8002/`
2. 检查浏览器控制台错误
3. 确认API地址正确（localhost:8002）

### AI功能不可用
```bash
# 检查环境变量
echo $ARK_API_KEY

# 检查AI状态
curl http://localhost:8002/api/ai/status

# 查看详细日志
tail -f /tmp/xuanxue-backend.log
```

## 📊 系统架构

```
┌─────────────────────────────────────────┐
│           前端 (HTML/JS)                │
│  - index.html (八字)                    │
│  - liuyao.html (六爻)                   │
│  - qimen.html (奇门)                    │
│  - zeri.html (择日)                     │
└──────────────┬──────────────────────────┘
               │ HTTP/JSON
               ↓
┌─────────────────────────────────────────┐
│      后端 API (FastAPI/Python)          │
│  - 八字排盘算法                         │
│  - 六爻占卜算法                         │
│  - 奇门遁甲算法                         │
│  - 择日算法                             │
│  - AI增强分析 (可选)                    │
└──────────────┬──────────────────────────┘
               │ (可选)
               ↓
┌─────────────────────────────────────────┐
│    AI服务 (火山引擎豆包大模型)          │
│  - DeepSeek-V3                          │
│  - 深度分析和解读                       │
└─────────────────────────────────────────┘
```

## 🎓 学习路径

1. **基础理论** → 阅读 `docs/01_根基理论.md`
2. **选择分支** → 命理/风水/占卜/相学/择日
3. **实践操作** → 使用Web系统进行排盘和分析
4. **深入学习** → 阅读对应的详细文档

## 💡 使用技巧

1. **批量测试**：使用API接口可以批量处理数据
2. **保存结果**：浏览器中可以复制结果保存
3. **对比分析**：可以同时打开多个页面对比
4. **AI辅助**：配置AI后可获得更详细的解读

## 📞 获取帮助

- **查看API文档**：http://localhost:8002/docs
- **查看日志**：`tail -f /tmp/xuanxue-backend.log`
- **重启服务**：`./stop.sh && ./start.sh`

## ⚖️ 重要提示

- 本系统仅供学习研究使用
- AI分析结果仅供参考
- 不应作为重大决策的唯一依据
- 命运掌握在自己手中
